generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id                 String     @id @default(cuid())
  email              String     @unique
  firstName          String
  lastName           String
  role               String     @default("FOCAL_PERSON")
  contactNumber      String?
  status             String     @default("ACTIVE")
  hashedPassword     String
  resetPasswordToken String?
  resetTokenExpiry   DateTime?
  createdAt          DateTime   @default(now())
  updatedAt          DateTime   @updatedAt
  departmentId       Int
  department         Department @relation(fields: [departmentId], references: [id])

  @@index([email])
  @@index([departmentId])
  @@map("users")
}

model Department {
  id               Int               @id @default(autoincrement())
  name             String            @unique
  abbreviation     String            @unique
  description      String?
  logoUrl          String?
  status           String            @default("ACTIVE")
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  academicPrograms AcademicProgram[]
  users            User[]

  @@map("departments")
}

model AcademicProgram {
  id            Int        @id @default(autoincrement())
  name          String     @unique
  abbreviation  String     @unique
  description   String?
  totalStudents Int        @default(0)
  status        String     @default("ACTIVE")
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  departmentId  Int
  department    Department @relation(fields: [departmentId], references: [id])

  @@index([departmentId])
  @@map("academic_programs")
}
